---
# Версия PostgreSQL
postgresql_version: "13"

# Системный пользователь
postgresql_system_user: "postgres"
postgresql_create_system_user: true

# Базовая структура директорий
postgresql_data_dir: "/pgdata/data"
postgresql_backup_dir: "/backups_pg"
postgresql_archive_dir: "/backups_pg/archive"
postgresql_archive_xlog_dir: "/backups_pg/archive_xlog"
postgresql_log_dir: "/var/log/pg_log"

# Базовые сетевые настройки
postgresql_port: 5432
postgresql_listen_addresses: "*"
postgresql_configure_firewall: true

# OS-specific настройки пакетов
postgresql_redhat_packages:
  - "postgresql{{ postgresql_version }}"
  - "postgresql{{ postgresql_version }}-server"
  - "postgresql{{ postgresql_version }}-contrib"
  - "postgresql{{ postgresql_version }}-libs"

postgresql_debian_packages:
  - "postgresql-{{ postgresql_version }}"
  - "postgresql-contrib-{{ postgresql_version }}"
  - "postgresql-server-dev-{{ postgresql_version }}"

postgresql_redhat_service_name: "postgresql-{{ postgresql_version }}.service"
postgresql_debian_service_name: "postgresql"

postgresql_redhat_bin_dir: "/usr/pgsql-{{ postgresql_version }}/bin"
postgresql_debian_bin_dir: "/usr/lib/postgresql/{{ postgresql_version }}/bin"

postgresql_redhat_repo_url: "http://link.rzd/2495"
postgresql_redhat_repo_gpgkey: "http://link.rzd/2495/RPM-GPG-KEY-PGDG"

# Базовые настройки бэкапов
postgresql_configure_backup: true
postgresql_backup_retention: 5
postgresql_backup_script_path: "/var/lib/{{ postgresql_system_user }}/backupDB.sh"

# Базовые настройки PostgreSQL
postgresql_max_connections: 100
postgresql_shared_buffers: "128MB"
postgresql_work_mem: "4MB"
postgresql_maintenance_work_mem: "64MB"
postgresql_wal_level: "minimal"